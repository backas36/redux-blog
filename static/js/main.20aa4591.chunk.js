(this["webpackJsonpweek22-hw1"]=this["webpackJsonpweek22-hw1"]||[]).push([[0],{30:function(n,t,e){},31:function(n,t,e){},41:function(n,t,e){"use strict";e.r(t);var r,c,o,a,i,s,u,b,p,d,j,l,x,f,h,O,g,v,m,k,w,y,P,S,z,C,E,L,M,R,N,A,B,F,_,I,T,D,J,U,H,W,Y,q,G,K,Q,V,X,Z,$,nn,tn,en,rn,cn,on,an,sn=e(1),un=e.n(sn),bn=e(18),pn=e.n(bn),dn=(e(30),e(31),e(8)),jn=e(7),ln=e(2),xn=e(3),fn=e(17),hn=e(6),On=e.n(hn),gn=e(9),vn="token",mn=function(n){localStorage.setItem(vn,n)},kn=function(n){return localStorage.getItem(vn)},wn="https://student-json-api.lidemy.me",yn=function(){var n=Object(gn.a)(On.a.mark((function n(){var t;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(wn,"/posts?_sort=createdAt&_order=desc&_expand=user"));case 2:return t=n.sent,n.next=5,t.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Pn=function(){var n=Object(gn.a)(On.a.mark((function n(t,e){var r;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(wn,"/posts?_sort=createdAt&_order=desc&_page=").concat(t,"&_limit=").concat(e,"&_expand=user"));case 2:return r=n.sent,n.next=5,r.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),Sn=function(){var n=Object(gn.a)(On.a.mark((function n(t){var e;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(wn,"/posts/").concat(t,"?_expand=user"));case 2:return e=n.sent,n.next=5,e.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),zn=function(){var n=Object(gn.a)(On.a.mark((function n(t,e){var r;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(wn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})});case 2:return r=n.sent,n.next=5,r.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),Cn=function(){var n=Object(gn.a)(On.a.mark((function n(){var t,e;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=kn(),n.next=3,fetch("".concat(wn,"/me"),{headers:{authorization:"Bearer ".concat(t)}});case 3:return e=n.sent,n.next=6,e.json();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),En=function(){var n=Object(gn.a)(On.a.mark((function n(t){var e,r;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=kn(),n.next=3,fetch("".concat(wn,"/posts/").concat(t),{method:"DELETE",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)}});case 3:return r=n.sent,n.next=6,r.json();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),Ln=function(){var n=Object(gn.a)(On.a.mark((function n(t,e){var r,c;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=kn(),n.next=3,fetch("".concat(wn,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(r)},body:JSON.stringify({title:t,body:e})});case 3:return c=n.sent,n.next=6,c.json();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),Mn=function(){var n=Object(gn.a)(On.a.mark((function n(t,e){var r,c,o,a;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.editedTitle,c=e.editedBody,o=kn(),n.next=4,fetch("".concat(wn,"/posts/").concat(t),{method:"PATCH",headers:{"content-type":"application/json",authorization:"Bearer ".concat(o)},body:JSON.stringify({title:r,body:c})});case 4:return a=n.sent,n.next=7,a.json();case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),Rn=function(){var n=Object(gn.a)(On.a.mark((function n(t,e,r){var c;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(wn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,nickname:e,password:r})});case 2:return c=n.sent,n.next=5,c.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),Nn=Object(fn.b)({name:"user",initialState:{user:null,errorMsg:null},reducers:{setUser:function(n,t){n.user=t.payload},setErrorMsg:function(n,t){n.errorMsg=t.payload}}}),An=Nn.actions,Bn=An.setUser,Fn=An.setErrorMsg,_n=function(n,t){return function(e){return zn(n,t).then((function(n){return 0===n.ok?e(Fn(n.message)):(mn(n.token),n)})).catch((function(n){e(Fn(n))}))}},In=function(){return function(n){return Cn().then((function(t){return 1!==t.ok?(mn(null),n(Fn(t.message))):(n(Bn(t.data)),t)})).catch((function(t){n(Fn(t))}))}},Tn=function(n,t,e){return function(r){return Rn(n,t,e).then((function(n){return 1!==n.ok?r(Fn(n.message)):(mn(n.token),n)})).catch((function(n){r(Fn(n))}))}},Dn=Nn.reducer,Jn=e(4),Un=e(0),Hn=xn.a.header(r||(r=Object(ln.a)(["\n  height:64px;\n  display:flex;\n  justify-content:space-around;\n  align-items:center;\n  padding:20px 0;\n"]))),Wn=xn.a.div(c||(c=Object(ln.a)(["\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n"]))),Yn=Object(xn.a)(dn.b)(o||(o=Object(ln.a)(["\n  font-size:32px;\n  font-weight:bold;\n  color:rgba(0,0,0, 0.6);\n  text-decoration:none;\n"]))),qn=Object(xn.a)(dn.b)(a||(a=Object(ln.a)(["\n  font-size:18px;\n  font-weight:300;\n  color:rgba(0,0,0, 0.6);\n  margin-top:12px;\n  text-decoration:none;\n\n"]))),Gn=xn.a.div(i||(i=Object(ln.a)(["\n  display:flex;\n"]))),Kn=Object(xn.a)(dn.b)(s||(s=Object(ln.a)(["\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  text-decoration:none;\n\n  &+& {\n    margin-left:12px;\n  }\n"]))),Qn=function(){var n=Object(Jn.b)(),t=Object(Jn.c)((function(n){return n.user.user}));return Object(Un.jsxs)(Hn,{children:[Object(Un.jsxs)(Wn,{children:[Object(Un.jsx)(Yn,{to:"/",children:"Lidemy Blog"}),Object(Un.jsx)(qn,{to:"/about",children:"Welcome to the blog of Lidemy-Yang"})]}),Object(Un.jsxs)(Gn,{children:[Object(Un.jsx)(Kn,{to:"/posts-list",children:"\u6240\u6709\u6587\u7ae0"}),t&&Object(Un.jsx)(Kn,{to:"/new-post",children:"\u767c\u4f48\u65b0\u6587\u7ae0"}),!t&&Object(Un.jsx)(Kn,{to:"/login",children:"\u767b\u5165"}),t&&Object(Un.jsx)(Kn,{to:"/",onClick:function(){n((function(n){mn(""),n(Bn(null))}))},children:"\u767b\u51fa"})]})]})},Vn=Object(fn.b)({name:"posts",initialState:{isLoadingPost:!0,post:[],newPostResponse:null,posts:[],postErrorMsg:null,patchPostResponse:null,currentPageNum:1},reducers:{setIsLoginPost:function(n,t){n.isLoadingPost=t.payload},setPost:function(n,t){n.post=t.payload},setNewPostResponse:function(n,t){n.newPostResponse=t.payload},setAllPosts:function(n,t){n.posts=t.payload},setPostErrorMsg:function(n,t){n.postErrorMsg=t.payload},setPatchPostResponse:function(n,t){n.patchPostResponse=t.payload},setCurrentPageNum:function(n,t){n.currentPageNum=t.payload}}}),Xn=Vn.actions,Zn=Xn.setIsLoginPost,$n=Xn.setPost,nt=Xn.setNewPostResponse,tt=Xn.setAllPosts,et=(Xn.setPostErrorMsg,Xn.setPatchPostResponse),rt=Xn.setCurrentPageNum,ct=function(n){return function(t){t(Zn(!0)),Sn(n).then((function(n){t($n(n)),t(Zn(!1))})).catch((function(n){t(Zn(!1)),console.log(n)}))}},ot=function(n,t){return function(e){return Ln(n,t).then((function(n){return e(nt(n)),n}))}},at=function(){return function(n){n(Zn(!0)),yn().then((function(t){n(tt(t)),n(Zn(!1))})).catch((function(t){n(Zn(!1)),console.log(t)}))}},it=function(n){return function(t){return En(n).then((function(n){return n})).catch((function(n){console.log(n)}))}},st=function(n,t){return function(e){return e(Zn(!0)),Mn(n,t).then((function(n){return e(et(n)),e(Zn(!1)),n})).catch((function(n){e(Zn(!1)),console.log(n)}))}},ut=function(n,t){return function(e){e(Zn(!0)),Pn(n,t).then((function(n){e(tt(n)),e(Zn(!1))})).catch((function(n){e(Zn(!1)),console.log(n)}))}},bt=Vn.reducer,pt=xn.a.main(u||(u=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n"]))),dt=xn.a.div(b||(b=Object(ln.a)(["\n  box-shadow: 0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  padding:30px ;\n  background:#fff;\n  & + & {\n    margin-top:20px;\n  }\n  position:relative;\n"]))),jt=Object(xn.a)(dn.b)(p||(p=Object(ln.a)(["\n  font-size:28px;\n  color:#000;\n  text-decoration:none;\n  overflow: hidden;\n    white-space: nowrap;\n    width: 80%;\n    text-overflow: ellipsis;\n    display: block;\n"]))),lt=xn.a.div(d||(d=Object(ln.a)(["\n  display:flex;\n  margin-top:12px;\n"]))),xt=xn.a.div(j||(j=Object(ln.a)(["\n  margin-right:12px;\n"]))),ft=xn.a.div(l||(l=Object(ln.a)(["\n  font-weight:300;\n  color:rgba(0,0,0,0.6);\n  font-size:16px;\n"]))),ht=xn.a.div(x||(x=Object(ln.a)(["\n  margin-top:30px;\n  font-size:18px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n"]))),Ot=Object(xn.a)(dn.b)(f||(f=Object(ln.a)(["\n  margin-top:30px;\n  display:inline-block;\n  color:rgba(0,0,0,0.6);\n  text-decoration:none;\n  border:1px solid #ccc;\n  padding:8px 24px;\n  background:#fff;\n  cursor:pointer;\n  transition: background 0.2s;\n  &:hover{\n    background:#ccc;\n  }\n  & + & {\n    margin-left:8px;\n  }\n"]))),gt=xn.a.div(h||(h=Object(ln.a)(["\n  font-size:18px;\n"]))),vt=xn.a.div(O||(O=Object(ln.a)(["\n  display:flex;\n  align-items:center;\n  margin-bottom:40px;\n  justify-content:center;\n"]))),mt=xn.a.button(g||(g=Object(ln.a)(["\n  border:0;\n  text-decoration:underline;\n  margin:0 12px;\n  cursor:pointer;\n  opacity:0.5;\n  transition: opacity .5s;\n  &:hover{\n    opacity:1;\n  }\n"]))),kt=xn.a.div(v||(v=Object(ln.a)(["\n  position:absolute;\n  right: 30px;\n  bottom: 30px;\n"]))),wt=xn.a.button(m||(m=Object(ln.a)(["\n  margin-top:30px;\n  margin-left:8px;\n  display:inline-block;\n  color:rgba(0,0,0,0.6);\n  text-decoration:none;\n  border:1px solid #ccc;\n  padding:8px 24px;\n  background:#fff;\n  cursor:pointer;\n  transition: background 0.2s;\n  &:hover{\n    background:#ccc;\n  }\n  \n"]))),yt=function(){var n=Object(Jn.b)(),t=Object(Jn.c)((function(n){return n.posts.posts})),e=Object(Jn.c)((function(n){return n.posts.currentPageNum})),r=Object(Jn.c)((function(n){return n.posts.isLoadingPost}));Object(sn.useEffect)((function(){n(ut(e,10))}),[n,e]);var c=function(t){var r=t.post,c=r.title,o=r.createdAt,a=r.id,i=r.body,s=r.userId,u=Object(Jn.c)((function(n){return n.user.user}));return Object(Un.jsx)(Un.Fragment,{children:Object(Un.jsxs)(dt,{children:[Object(Un.jsx)(jt,{to:"/posts/".concat(a),children:c}),Object(Un.jsxs)(lt,{children:[Object(Un.jsx)(xt,{children:r.user.nickname}),Object(Un.jsx)(ft,{children:new Date(o).toLocaleString()})]}),Object(Un.jsx)(ht,{children:i}),Object(Un.jsx)(Ot,{to:"/posts/".concat(a),children:"Read More"}),u&&u.id===s&&Object(Un.jsxs)(kt,{children:[Object(Un.jsx)(dn.b,{to:"/edit-post/".concat(a),children:Object(Un.jsx)(wt,{children:"Edit"})}),Object(Un.jsx)(wt,{onClick:function(){return function(t){n(it(t)).then((function(t){return n(ut(e,10))}))}(a)},children:"Delete"})]})]})})};return Object(Un.jsx)(Un.Fragment,{children:r?Object(Un.jsx)("div",{children:"Loading..."}):Object(Un.jsxs)(Un.Fragment,{children:[Object(Un.jsx)(pt,{children:t.map((function(n){return Object(Un.jsx)(c,{post:n},n.id)}))}),Object(Un.jsxs)(vt,{children:[e>1&&Object(Un.jsx)(mt,{onClick:function(){e>1&&n(rt(e-1))},children:"pre"}),Object(Un.jsx)(gt,{children:e}),10===t.length&&Object(Un.jsx)(mt,{onClick:function(){n(rt(e+1))},children:"next"})]})]})})},Pt=e(10),St=xn.a.form(k||(k=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n  box-shadow:0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  text-align:center;\n  padding:30px 0;\n  background-color:#fff;\n\n  & div + div {\n    margin-top:20px;\n  }\n"]))),zt=xn.a.button(w||(w=Object(ln.a)(["\n  margin-top:60px;\n  padding:8px 24px;\n  border:1px solid #ccc;\n  cursor:pointer;\n  background-color:#fff;\n  border-radius:4px;\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  transition:background-color 0.2s;\n  margin-left:20px;\n\n  &:hover {\n    background-color:#ccc;\n  }\n\n"]))),Ct=xn.a.label(y||(y=Object(ln.a)(["\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  & input{\n    margin:0 12px;\n  }\n"]))),Et=xn.a.div(P||(P=Object(ln.a)(["\n  margin-top:20px;\n  color:#ef4a52;\n"]))),Lt=function(){var n=Object(sn.useState)(""),t=Object(Pt.a)(n,2),e=t[0],r=t[1],c=Object(sn.useState)(""),o=Object(Pt.a)(c,2),a=o[0],i=o[1],s=Object(Jn.c)((function(n){return n.user.errorMsg})),u=Object(jn.f)(),b=Object(Jn.b)();Object(sn.useEffect)((function(){return function(){return b(Fn(null))}}),[b]);var p=function(){var n=Object(gn.a)(On.a.mark((function n(t){return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b(Fn(null)),e&&a){n.next=3;break}return n.abrupt("return",b(Fn("\u8acb\u586b\u5165\u5b8c\u6574\u8cc7\u6599")));case 3:return n.prev=3,n.next=6,b(_n(e,a));case 6:if(n.sent.token){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,b(In());case 11:n.sent.data&&u.push("/"),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),b(Fn("\u8acb\u7a0d\u5f8c\u518d\u767b\u5165\u770b\u770b"));case 18:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(t){return n.apply(this,arguments)}}();return Object(Un.jsxs)(St,{onSubmit:p,children:[Object(Un.jsx)("div",{children:Object(Un.jsxs)(Ct,{children:["username",Object(Un.jsx)("input",{value:e,onChange:function(n){return r(n.target.value)}})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(Ct,{children:["password",Object(Un.jsx)("input",{type:"password",value:a,onChange:function(n){return i(n.target.value)}})]})}),Object(Un.jsx)(zt,{type:"submit",children:"Login"}),Object(Un.jsx)(dn.b,{to:"/register",children:Object(Un.jsx)(zt,{type:"button",children:"Register"})}),s&&Object(Un.jsx)(Et,{children:s})]})},Mt=xn.a.div(S||(S=Object(ln.a)(["\n  max-width:960px;\n  margin:60px auto;\n"]))),Rt=xn.a.div(z||(z=Object(ln.a)(["\n  font-size:30px;\n  color:#777;\n  text-align:center;\n"]))),Nt=xn.a.p(C||(C=Object(ln.a)(["\n  margin-top:50px;\n  padding:0 20px;\n  color:#888;\n  line-height:2;\n"]))),At=function(){return Object(Un.jsx)(Un.Fragment,{children:Object(Un.jsxs)(Mt,{children:[Object(Un.jsx)(Rt,{children:"ABOUT ME"}),Object(Un.jsx)(Nt,{children:"\u9019\u662f\u5728 Lidemy \u7a0b\u5f0f\u5c0e\u5e2b\u8a08\u756b\u7684\u6700\u5f8c\u4e00\u500b\u5be6\u4f5c\u4f5c\u696d\uff0c\u6b64\u523b\u7684\u6211\u4e5f\u958b\u59cb\u6295\u5c65\u6b77\u4e86\uff0c11/19 \u6709\u500b\u9762\u8a66\uff0c\u5e0c\u671b\u4e00\u5207\u9806\u5229\u3002 \u4e5f\u5f88\u611f\u8b1d\u9019\u534a\u5e74\u966a\u4f34\u7684\u540c\u5b78\uff0c\u52a9\u6559\u9084\u6709 Huli\uff0c\u4e0d\u7ba1\u662f\u6280\u8853\u65b9\u9762\uff0c\u9019\u8a08\u756b\u9023\u5fc3\u7406\u5c64\u9762\u4e5f\u90fd\u6709\u5e6b\u6211\u4e0a\u4e86\u4e00\u5802\u8ab2\uff0c\u4e0d\u7ba1\u6700\u5f8c\u5de5\u4f5c\u662f\u5426\u6709\u9806\u5229\u627e\u5230\uff0c\u9019\u6bb5\u65e5\u5b50\u90fd\u662f\u6211\u4eba\u751f\u4e2d\u91cd\u8981\u7684\u6b77\u7a0b\u4e4b\u4e00\u3002"})]})})},Bt=xn.a.div(E||(E=Object(ln.a)(["\n  max-width:960px;\n  min-height:60vh;\n  margin:30px auto;\n  padding:10px;\n  box-shadow: 0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  padding:30px ;\n  background:#fff;\n\n  position:relative;\n"]))),Ft=xn.a.h2(L||(L=Object(ln.a)([""]))),_t=xn.a.div(M||(M=Object(ln.a)(["\n  display:flex;\n  margin-top:12px;\n"]))),It=xn.a.div(R||(R=Object(ln.a)(["\n  margin-right:12px;\n"]))),Tt=xn.a.div(N||(N=Object(ln.a)(["\n  font-weight:300;\n  color:rgba(0,0,0,0.6);\n  font-size:16px;\n"]))),Dt=xn.a.div(A||(A=Object(ln.a)(["\n  margin-top:80px;\n  font-size:18px;\n  padding:20px;\n  line-height:2em;\n"]))),Jt=xn.a.div(B||(B=Object(ln.a)(["\n  position:absolute;\n  right: 10px;\n  bottom: 10px;\n"]))),Ut=xn.a.button(F||(F=Object(ln.a)(["\n  margin-top:30px;\n  margin-left:8px;\n  display:inline-block;\n  color:rgba(0,0,0,0.6);\n  text-decoration:none;\n  border:1px solid #ccc;\n  padding:8px 24px;\n  background:#fff;\n  cursor:pointer;\n  transition: background 0.2s;\n  &:hover{\n    background:#ccc;\n  }\n  \n"]))),Ht=function(){var n,t=Object(jn.g)().id,e=Object(jn.f)(),r=Object(Jn.b)(),c=Object(Jn.c)((function(n){return n.posts.isLoadingPost})),o=Object(Jn.c)((function(n){return n.posts.post})),a=Object(Jn.c)((function(n){return n.user.user})),i=o.title,s=o.body,u=o.createdAt,b=o.userId;Object(sn.useEffect)((function(){r(ct(t))}),[t,r]);return Object(Un.jsx)(Un.Fragment,{children:c?Object(Un.jsx)("div",{children:"loading ..."}):Object(Un.jsx)(Un.Fragment,{children:Object(Un.jsxs)(Bt,{children:[Object(Un.jsx)(Ft,{children:i}),Object(Un.jsxs)(_t,{children:[Object(Un.jsx)(It,{children:null===(n=o.user)||void 0===n?void 0:n.nickname}),Object(Un.jsx)(Tt,{children:new Date(u).toLocaleString()})]}),Object(Un.jsx)(Dt,{children:s}),a&&a.id===b&&Object(Un.jsxs)(Jt,{children:[Object(Un.jsx)(dn.b,{to:"/edit-post/".concat(t),children:Object(Un.jsx)(Ut,{children:"Edit"})}),Object(Un.jsx)(Ut,{onClick:function(){r(it(t)),e.push("/posts-list")},children:"Delete"})]})]})})})},Wt=xn.a.form(_||(_=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n  box-shadow:0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  padding:30px 20px;\n  background-color:#fff;\n  text-align:center;\n\n  & div + div {\n    margin:40px auto;\n  }\n"]))),Yt=xn.a.button(I||(I=Object(ln.a)(["\n  margin-top:60px;\n  padding:8px 24px;\n  border:1px solid #ccc;\n  cursor:pointer;\n  background-color:#fff;\n  border-radius:4px;\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  transition:background-color 0.2s;\n  \n  & + & {\n    margin-left:20px;\n  }\n\n  &:hover {\n    background-color:#ccc;\n  }\n"]))),qt=xn.a.label(T||(T=Object(ln.a)(["\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  \n  & input{\n    display:block;\n    margin:20px  auto;\n    width:80%;\n  }\n\n  & textarea{\n    display:block;\n    margin:20px auto;\n    width:80%;\n  }\n"]))),Gt=xn.a.div(D||(D=Object(ln.a)(["\n  text-align: center;\n"]))),Kt=xn.a.div(J||(J=Object(ln.a)(["\n  margin-top:20px;\n  color:#ef4a52;\n"]))),Qt=function(){var n=Object(sn.useState)(""),t=Object(Pt.a)(n,2),e=t[0],r=t[1],c=Object(sn.useState)(""),o=Object(Pt.a)(c,2),a=o[0],i=o[1],s=Object(sn.useState)(),u=Object(Pt.a)(s,2),b=u[0],p=u[1],d=Object(jn.f)(),j=Object(Jn.b)(),l=function(){var n=Object(gn.a)(On.a.mark((function n(){var t;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p(null),e&&a){n.next=3;break}return n.abrupt("return",p("\u8acb\u586b\u5165\u5b8c\u6574\u5167\u5bb9"));case 3:return n.prev=3,n.next=6,j(ot(e,a));case 6:if(0!==(t=n.sent).ok){n.next=9;break}return n.abrupt("return",p(t.message));case 9:d.push("/posts/"+t.id),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),p("\u8acb\u7a0d\u5f8c\u518d\u8a66\u8a66\u770b");case 15:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(){return n.apply(this,arguments)}}();return Object(Un.jsxs)(Wt,{onSubmit:l,children:[Object(Un.jsx)("div",{children:Object(Un.jsxs)(qt,{children:["\u6587\u7ae0\u6a19\u984c",Object(Un.jsx)("input",{value:e,onChange:function(n){return r(n.target.value)}})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(qt,{children:["\u6587\u7ae0\u5167\u5bb9",Object(Un.jsx)("textarea",{value:a,rows:"10",onChange:function(n){return i(n.target.value)}})]})}),Object(Un.jsxs)(Gt,{children:[Object(Un.jsx)(Yt,{type:"submit",children:"\u65b0\u589e\u6587\u7ae0"}),Object(Un.jsx)(Yt,{type:"button",onClick:function(){r(""),i(""),p("")},children:"\u91cd\u65b0\u586b\u5beb"}),b&&Object(Un.jsx)(Kt,{children:b})]})]})},Vt=xn.a.form(U||(U=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n  box-shadow:0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  text-align:center;\n  padding:30px 0;\n  background-color:#fff;\n\n  & div + div {\n    margin-top:20px;\n  }\n"]))),Xt=xn.a.button(H||(H=Object(ln.a)(["\n  margin-top:60px;\n  padding:8px 24px;\n  border:1px solid #ccc;\n  cursor:pointer;\n  background-color:#fff;\n  border-radius:4px;\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  transition:background-color 0.2s;\n  margin-left:20px;\n  \n  &:hover {\n    background-color:#ccc;\n  }\n\n"]))),Zt=xn.a.label(W||(W=Object(ln.a)(["\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  & input{\n    margin:0 12px;\n  }\n"]))),$t=xn.a.div(Y||(Y=Object(ln.a)(["\n  margin-top:20px;\n  color:#ef4a52;\n"]))),ne=function(){var n=Object(sn.useState)(""),t=Object(Pt.a)(n,2),e=t[0],r=t[1],c=Object(sn.useState)(""),o=Object(Pt.a)(c,2),a=o[0],i=o[1],s=Object(sn.useState)(""),u=Object(Pt.a)(s,2),b=u[0],p=u[1],d=Object(sn.useState)(""),j=Object(Pt.a)(d,2),l=j[0],x=j[1],f=Object(Jn.c)((function(n){return n.user.errorMsg})),h=Object(Jn.b)(),O=Object(jn.f)();Object(sn.useEffect)((function(){return function(){return h(Fn(null))}}),[h]);var g=function(){var n=Object(gn.a)(On.a.mark((function n(t){var r,c;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&a&&b&&l){n.next=2;break}return n.abrupt("return",h(Fn("\u8acb\u586b\u5165\u5b8c\u6574\u8cc7\u6599")));case 2:if(b===l){n.next=4;break}return n.abrupt("return",h(Fn("\u8acb\u78ba\u8a8d\u5169\u6b21\u5bc6\u78bc\u662f\u5426\u76f8\u7b26")));case 4:return n.prev=4,n.next=7,h(Tn(e,a,b));case 7:return r=n.sent,n.next=10,h(In());case 10:c=n.sent,console.log(1===r.ok&&1===c.ok),1===r.ok&&1===c.ok&&O.push("/"),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(4),h(Fn("\u8acb\u7a0d\u5f8c\u518d\u767b\u5165\u770b\u770b"));case 18:case"end":return n.stop()}}),n,null,[[4,15]])})));return function(t){return n.apply(this,arguments)}}();return Object(Un.jsxs)(Vt,{onSubmit:g,children:[Object(Un.jsx)("div",{children:Object(Un.jsxs)(Zt,{children:["username",Object(Un.jsx)("input",{value:e,onChange:function(n){return r(n.target.value)}})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(Zt,{children:["nickname",Object(Un.jsx)("input",{value:a,onChange:function(n){return i(n.target.value)}})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(Zt,{children:["password",Object(Un.jsx)("input",{type:"password",value:b,onChange:function(n){return p(n.target.value)}})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(Zt,{children:["comfirm password",Object(Un.jsx)("input",{type:"password",value:l,onChange:function(n){return x(n.target.value)}})]})}),Object(Un.jsx)(Xt,{type:"reset",onClick:function(){h(Fn(null)),r(""),i(""),p(""),x("")},children:"Reset"}),Object(Un.jsx)(Xt,{type:"submit",children:"Register"}),f&&Object(Un.jsx)($t,{children:f})]})},te=xn.a.main(q||(q=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n"]))),ee=xn.a.div(G||(G=Object(ln.a)(["\n  box-shadow: 0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  padding:30px ;\n  background:#fff;\n  & + & {\n    margin-top:20px;\n  }\n  position:relative;\n"]))),re=Object(xn.a)(dn.b)(K||(K=Object(ln.a)(["\n  font-size:28px;\n  color:#000;\n  text-decoration:none;\n  overflow: hidden;\n    white-space: nowrap;\n    width: 80%;\n    text-overflow: ellipsis;\n    display: block;\n"]))),ce=xn.a.div(Q||(Q=Object(ln.a)(["\n  display:flex;\n  margin-top:12px;\n"]))),oe=xn.a.div(V||(V=Object(ln.a)(["\n  margin-right:12px;\n"]))),ae=xn.a.div(X||(X=Object(ln.a)(["\n  font-weight:300;\n  color:rgba(0,0,0,0.6);\n  font-size:16px;\n"]))),ie=xn.a.div(Z||(Z=Object(ln.a)(["\n  margin-top:30px;\n  font-size:18px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n"]))),se=Object(xn.a)(dn.b)($||($=Object(ln.a)(["\n  margin-top:30px;\n  display:inline-block;\n  color:rgba(0,0,0,0.6);\n  text-decoration:none;\n  border:1px solid #ccc;\n  padding:8px 24px;\n  background:#fff;\n  cursor:pointer;\n  transition: background 0.2s;\n  &:hover{\n    background:#ccc;\n  }\n"]))),ue=xn.a.div(nn||(nn=Object(ln.a)(["\n  position:absolute;\n  right: 30px;\n  bottom: 30px;\n"]))),be=xn.a.button(tn||(tn=Object(ln.a)(["\n  margin-top:30px;\n  margin-left:8px;\n  display:inline-block;\n  color:rgba(0,0,0,0.6);\n  text-decoration:none;\n  border:1px solid #ccc;\n  padding:8px 24px;\n  background:#fff;\n  cursor:pointer;\n  transition: background 0.2s;\n  &:hover{\n    background:#ccc;\n  }\n  \n"]))),pe=function(){var n=Object(Jn.b)(),t=Object(Jn.c)((function(n){return n.posts.isLoadingPost})),e=Object(Jn.c)((function(n){return n.posts.posts})),r=Object(Jn.c)((function(n){return n.user.user}));Object(sn.useEffect)((function(){n(at())}),[n]);var c=function(t){var e=t.post,c=e.title,o=e.createdAt,a=e.id,i=e.body,s=e.userId;return Object(Un.jsx)(Un.Fragment,{children:Object(Un.jsxs)(ee,{children:[Object(Un.jsx)(re,{to:"/posts/".concat(a),children:c}),Object(Un.jsxs)(ce,{children:[Object(Un.jsx)(oe,{children:e.user.nickname}),Object(Un.jsx)(ae,{children:new Date(o).toLocaleString()})]}),Object(Un.jsx)(ie,{children:i}),Object(Un.jsx)(se,{to:"/posts/".concat(a),children:"Read More"}),r&&r.id===s&&Object(Un.jsxs)(ue,{children:[Object(Un.jsx)(dn.b,{to:"/edit-post/".concat(a),children:Object(Un.jsx)(be,{children:"Edit"})}),Object(Un.jsx)(dn.b,{to:"/posts-list",replace:!0,children:Object(Un.jsx)(be,{onClick:function(){return function(t){n(it(t)).then((function(t){return n(at())}))}(a)},children:"Delete"})})]})]})})};return Object(Un.jsx)(Un.Fragment,{children:t?Object(Un.jsx)("div",{children:"Loading..."}):Object(Un.jsx)(te,{children:e.map((function(n){return Object(Un.jsx)(c,{post:n},n.id)}))})})},de=xn.a.form(en||(en=Object(ln.a)(["\n  max-width:960px;\n  margin:30px auto;\n  box-shadow:0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%);\n  padding:30px 20px;\n  background-color:#fff;\n  text-align:center;\n\n  & div + div {\n    margin:40px auto;\n  }\n"]))),je=xn.a.button(rn||(rn=Object(ln.a)(["\n  margin-top:60px;\n  padding:8px 24px;\n  border:1px solid #ccc;\n  cursor:pointer;\n  background-color:#fff;\n  border-radius:4px;\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  transition:background-color 0.2s;\n  \n  & + & {\n    margin-left:20px;\n  }\n\n  &:hover {\n    background-color:#ccc;\n  }\n"]))),le=xn.a.label(cn||(cn=Object(ln.a)(["\n  font-weight:bold;\n  font-size:18px;\n  color:rgba(0,0,0, 0.6);\n  \n  & input{\n    display:block;\n    margin:20px  auto;\n    width:80%;\n  }\n\n  & textarea{\n    display:block;\n    margin:20px auto;\n    width:80%;\n  }\n"]))),xe=xn.a.div(on||(on=Object(ln.a)(["\n  text-align: center;\n"]))),fe=xn.a.div(an||(an=Object(ln.a)(["\n  margin-top:20px;\n  color:#ef4a52;\n"]))),he=function(){var n=Object(sn.useState)(),t=Object(Pt.a)(n,2),e=t[0],r=t[1],c=Object(sn.useState)(""),o=Object(Pt.a)(c,2),a=o[0],i=o[1],s=Object(sn.useState)(""),u=Object(Pt.a)(s,2),b=u[0],p=u[1],d=Object(jn.f)(),j=Object(jn.g)().id,l=Object(Jn.b)(),x=Object(Jn.c)((function(n){return n.posts.isLoadingPost})),f=Object(Jn.c)((function(n){return n.posts.post}));Object(sn.useEffect)((function(){l(ct(j))}),[j,l]);var h=function(){var n=Object(gn.a)(On.a.mark((function n(){var t;return On.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(null),a&&b){n.next=3;break}return n.abrupt("return",r("\u8acb\u586b\u5165\u5b8c\u6574\u5167\u5bb9"));case 3:return n.prev=3,n.next=6,l(st(j,{editedTitle:a,editedBody:b}));case 6:t=n.sent,d.push("/posts/"+t.id),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),r("\u8acb\u7a0d\u5f8c\u518d\u8a66\u8a66\u770b");case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();return Object(Un.jsx)(Un.Fragment,{children:x?Object(Un.jsx)("div",{children:"Loading..."}):Object(Un.jsxs)(de,{onSubmit:h,children:[Object(Un.jsx)("div",{children:Object(Un.jsxs)(le,{children:["\u6587\u7ae0\u6a19\u984c",Object(Un.jsx)("input",{value:a,onChange:function(n){return i(n.target.value)},placeholder:f.title})]})}),Object(Un.jsx)("div",{children:Object(Un.jsxs)(le,{children:["\u6587\u7ae0\u5167\u5bb9",Object(Un.jsx)("textarea",{value:b,rows:"10",onChange:function(n){return p(n.target.value)},placeholder:f.body})]})}),Object(Un.jsxs)(xe,{children:[Object(Un.jsx)(je,{type:"submit",children:"\u78ba\u5b9a\u4fee\u6539"}),Object(Un.jsx)(je,{type:"button",onClick:function(){i(""),p(""),r("")},children:"\u91cd\u65b0\u586b\u5beb"}),e&&Object(Un.jsx)(fe,{children:e})]})]})})},Oe=function(){var n=Object(Jn.b)();return Object(sn.useEffect)((function(){kn()&&n(In())}),[n]),Object(Un.jsxs)(dn.a,{children:[Object(Un.jsx)(Qn,{}),Object(Un.jsxs)(jn.c,{children:[Object(Un.jsx)(jn.a,{exact:!0,path:"/",children:Object(Un.jsx)(yt,{})}),Object(Un.jsx)(jn.a,{path:"/about",children:Object(Un.jsx)(At,{})}),Object(Un.jsx)(jn.a,{path:"/login",children:Object(Un.jsx)(Lt,{})}),Object(Un.jsx)(jn.a,{path:"/posts/:id",children:Object(Un.jsx)(Ht,{})}),Object(Un.jsx)(jn.a,{path:"/posts-list",children:Object(Un.jsx)(pe,{})}),Object(Un.jsx)(jn.a,{path:"/new-post",children:Object(Un.jsx)(Qt,{})}),Object(Un.jsx)(jn.a,{path:"/edit-post/:id",children:Object(Un.jsx)(he,{})}),Object(Un.jsx)(jn.a,{path:"/register",children:Object(Un.jsx)(ne,{})})]})]})},ge=Object(fn.a)({reducer:{posts:bt,user:Dn}});pn.a.render(Object(Un.jsx)(un.a.StrictMode,{children:Object(Un.jsx)(Jn.a,{store:ge,children:Object(Un.jsx)(Oe,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.20aa4591.chunk.js.map